<!DOCTYPE html>
<html><head>
  <meta charset="utf-8" />
  <link rel="stylesheet" type="text/css" href="/css/default.css" />
</head>
<body><div id="nav">
  <p>
    <a href="/">home</a> | <a href="/index.xml">rss</a>
  </p>
</div>
<div id="content">
<h1 class="title">Dependency Injection is Parameter Passing</h1>
<div><p>Dependency injection means that instead of a function reaching out to
get its dependencies, it accepts the dependencies as parameters
instead. A dependency may be an external service, or something that
produces observable side effects, etc.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">// Before
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">isBedTime</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    var clock <span style="color:#000;font-weight:bold">=</span> Clock<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getSystemClock</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    var time <span style="color:#000;font-weight:bold">=</span> clock<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">now</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> time<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">hour</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">&gt;=</span> 23<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">// After
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">isBedTime</span><span style="color:#000;font-weight:bold">(</span>Clock clock<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    var time <span style="color:#000;font-weight:bold">=</span> clock<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">now</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> time<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">hour</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">&gt;=</span> 23<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>This make the function dumb (in a good way), and the dependencies
clear to the caller. The parameters will typically be some abstract
interfaces, and the concrete implementations can be swapped out to
something different by different callers, such as be mocked out to
make testing easy and deterministic. It&rsquo;s simple and yet effective in
reducing the complexity of large and complex programs, as dependencies
are being passed along instead of having &lsquo;smart functions&rsquo; that go out
and grab things like a spider web.</p>
<p>One may notice doing things this way will cause some functions to
start to have many parameters. This is a good thing to discovery, it&rsquo;s
helping to uncover that the function maybe doing too much, therefore
some refactoring is needed to make it fall in line with the single
responsibility principle, or the facade pattern is needed to be
applied to encapsulate/simplify interactions with some of the
underlying dependencies.</p>
<p>One may also notice that there are various dependency injection
libraries out there, XML based, annotation based, using runtime
reflection, or compile time generation, some may be technically
interesting, but none are necessary, and just like every other code,
they all have their own complexity and issues. Dependency injection at
it&rsquo;s core is just parameter passing, it&rsquo;s dumb and simple, and that&rsquo;s
the way it should be. Less is more.</p>
</div>
<p class="date">2019-12-18</p>

        </div></body>
</html>
